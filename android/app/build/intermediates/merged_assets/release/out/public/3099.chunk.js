"use strict";(self.webpackChunkstudent_mis_mobile_app=self.webpackChunkstudent_mis_mobile_app||[]).push([[3099],{53099:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"pwa_camera\": () => (/* binding */ CameraPWA)\n/* harmony export */ });\n/* harmony import */ var _core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96696);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n/**\n * MediaStream ImageCapture polyfill\n *\n * @license\n * Copyright 2018 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ImageCapture = window.ImageCapture;\nif (typeof ImageCapture === 'undefined') {\n    ImageCapture = /** @class */ (function () {\n        /**\n         * TODO https://www.w3.org/TR/image-capture/#constructors\n         *\n         * @param {MediaStreamTrack} videoStreamTrack - A MediaStreamTrack of the 'video' kind\n         */\n        function ImageCapture(videoStreamTrack) {\n            var _this = this;\n            if (videoStreamTrack.kind !== 'video')\n                throw new DOMException('NotSupportedError');\n            this._videoStreamTrack = videoStreamTrack;\n            if (!('readyState' in this._videoStreamTrack)) {\n                // Polyfill for Firefox\n                this._videoStreamTrack.readyState = 'live';\n            }\n            // MediaStream constructor not available until Chrome 55 - https://www.chromestatus.com/feature/5912172546752512\n            this._previewStream = new MediaStream([videoStreamTrack]);\n            this.videoElement = document.createElement('video');\n            this.videoElementPlaying = new Promise(function (resolve) {\n                _this.videoElement.addEventListener('playing', resolve);\n            });\n            if (HTMLMediaElement) {\n                this.videoElement.srcObject = this._previewStream; // Safari 11 doesn't allow use of createObjectURL for MediaStream\n            }\n            else {\n                this.videoElement.src = URL.createObjectURL(this._previewStream);\n            }\n            this.videoElement.muted = true;\n            this.videoElement.setAttribute('playsinline', ''); // Required by Safari on iOS 11. See https://webkit.org/blog/6784\n            this.videoElement.play();\n            this.canvasElement = document.createElement('canvas');\n            // TODO Firefox has https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas\n            this.canvas2dContext = this.canvasElement.getContext('2d');\n        }\n        Object.defineProperty(ImageCapture.prototype, \"videoStreamTrack\", {\n            /**\n             * https://w3c.github.io/mediacapture-image/index.html#dom-imagecapture-videostreamtrack\n             * @return {MediaStreamTrack} The MediaStreamTrack passed into the constructor\n             */\n            get: function () {\n                return this._videoStreamTrack;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * Implements https://www.w3.org/TR/image-capture/#dom-imagecapture-getphotocapabilities\n         * @return {Promise<PhotoCapabilities>} Fulfilled promise with\n         * [PhotoCapabilities](https://www.w3.org/TR/image-capture/#idl-def-photocapabilities)\n         * object on success, rejected promise on failure\n         */\n        ImageCapture.prototype.getPhotoCapabilities = function () {\n            return new Promise(function executorGPC(resolve, reject) {\n                // TODO see https://github.com/w3c/mediacapture-image/issues/97\n                var MediaSettingsRange = {\n                    current: 0, min: 0, max: 0,\n                };\n                resolve({\n                    exposureCompensation: MediaSettingsRange,\n                    exposureMode: 'none',\n                    fillLightMode: ['none'],\n                    focusMode: 'none',\n                    imageHeight: MediaSettingsRange,\n                    imageWidth: MediaSettingsRange,\n                    iso: MediaSettingsRange,\n                    redEyeReduction: false,\n                    whiteBalanceMode: 'none',\n                    zoom: MediaSettingsRange,\n                });\n                reject(new DOMException('OperationError'));\n            });\n        };\n        /**\n         * Implements https://www.w3.org/TR/image-capture/#dom-imagecapture-setoptions\n         * @param {Object} photoSettings - Photo settings dictionary, https://www.w3.org/TR/image-capture/#idl-def-photosettings\n         * @return {Promise<void>} Fulfilled promise on success, rejected promise on failure\n         */\n        ImageCapture.prototype.setOptions = function (_photoSettings) {\n            if (_photoSettings === void 0) { _photoSettings = {}; }\n            return new Promise(function executorSO(_resolve, _reject) {\n                // TODO\n            });\n        };\n        /**\n         * TODO\n         * Implements https://www.w3.org/TR/image-capture/#dom-imagecapture-takephoto\n         * @return {Promise<Blob>} Fulfilled promise with [Blob](https://www.w3.org/TR/FileAPI/#blob)\n         * argument on success; rejected promise on failure\n         */\n        ImageCapture.prototype.takePhoto = function () {\n            var self = this;\n            return new Promise(function executorTP(resolve, reject) {\n                // `If the readyState of the MediaStreamTrack provided in the constructor is not live,\n                // return a promise rejected with a new DOMException whose name is \"InvalidStateError\".`\n                if (self._videoStreamTrack.readyState !== 'live') {\n                    return reject(new DOMException('InvalidStateError'));\n                }\n                self.videoElementPlaying.then(function () {\n                    try {\n                        self.canvasElement.width = self.videoElement.videoWidth;\n                        self.canvasElement.height = self.videoElement.videoHeight;\n                        self.canvas2dContext.drawImage(self.videoElement, 0, 0);\n                        self.canvasElement.toBlob(resolve);\n                    }\n                    catch (error) {\n                        reject(new DOMException('UnknownError'));\n                    }\n                });\n            });\n        };\n        /**\n         * Implements https://www.w3.org/TR/image-capture/#dom-imagecapture-grabframe\n         * @return {Promise<ImageBitmap>} Fulfilled promise with\n         * [ImageBitmap](https://www.w3.org/TR/html51/webappapis.html#webappapis-images)\n         * argument on success; rejected promise on failure\n         */\n        ImageCapture.prototype.grabFrame = function () {\n            var self = this;\n            return new Promise(function executorGF(resolve, reject) {\n                // `If the readyState of the MediaStreamTrack provided in the constructor is not live,\n                // return a promise rejected with a new DOMException whose name is \"InvalidStateError\".`\n                if (self._videoStreamTrack.readyState !== 'live') {\n                    return reject(new DOMException('InvalidStateError'));\n                }\n                self.videoElementPlaying.then(function () {\n                    try {\n                        self.canvasElement.width = self.videoElement.videoWidth;\n                        self.canvasElement.height = self.videoElement.videoHeight;\n                        self.canvas2dContext.drawImage(self.videoElement, 0, 0);\n                        // TODO polyfill https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmapFactories/createImageBitmap for IE\n                        resolve(window.createImageBitmap(self.canvasElement));\n                    }\n                    catch (error) {\n                        reject(new DOMException('UnknownError'));\n                    }\n                });\n            });\n        };\n        return ImageCapture;\n    }());\n}\nwindow.ImageCapture = ImageCapture;\nvar CameraPWA = /** @class */ (function () {\n    function class_1(hostRef) {\n        var _this = this;\n        (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);\n        this.facingMode = 'user';\n        this.noDevicesText = 'No camera found';\n        this.noDevicesButtonText = 'Choose image';\n        this.showShutterOverlay = false;\n        this.flashIndex = 0;\n        this.hasCamera = null;\n        this.rotation = 0;\n        this.deviceError = null;\n        // Whether the device has multiple cameras (front/back)\n        this.hasMultipleCameras = false;\n        // Whether the device has flash support\n        this.hasFlash = false;\n        // Flash modes for camera\n        this.flashModes = [];\n        // Current flash mode\n        this.flashMode = 'off';\n        this.handlePickFile = function (_e) {\n        };\n        this.handleShutterClick = function (_e) {\n            console.debug('shutter click');\n            _this.capture();\n        };\n        this.handleRotateClick = function (_e) {\n            _this.rotate();\n        };\n        this.handleClose = function (_e) {\n            _this.handlePhoto && _this.handlePhoto(null);\n        };\n        this.handleFlashClick = function (_e) {\n            _this.cycleFlash();\n        };\n        this.handleCancelPhoto = function (_e) {\n            var track = _this.stream && _this.stream.getTracks()[0];\n            var c = track && track.getConstraints();\n            _this.photo = null;\n            _this.photoSrc = null;\n            if (c) {\n                _this.initCamera({\n                    video: {\n                        facingMode: c.facingMode\n                    }\n                });\n            }\n            else {\n                _this.initCamera();\n            }\n        };\n        this.handleAcceptPhoto = function (_e) {\n            _this.handlePhoto && _this.handlePhoto(_this.photo);\n        };\n        this.handleFileInputChange = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            var input, file, orientation, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        input = e.target;\n                        file = input.files[0];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.getOrientation(file)];\n                    case 2:\n                        orientation = _a.sent();\n                        console.debug('Got orientation', orientation);\n                        this.photoOrientation = orientation;\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 4:\n                        this.handlePhoto && this.handlePhoto(file);\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        this.handleVideoMetadata = function (e) {\n            console.debug('Video metadata', e);\n        };\n        this.isServer = (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.d)(this, \"isServer\");\n    }\n    class_1.prototype.componentDidLoad = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.isServer) {\n                            return [2 /*return*/];\n                        }\n                        this.defaultConstraints = {\n                            video: {\n                                facingMode: this.facingMode\n                            }\n                        };\n                        // Figure out how many cameras we have\n                        return [4 /*yield*/, this.queryDevices()];\n                    case 1:\n                        // Figure out how many cameras we have\n                        _a.sent();\n                        // Initialize the camera\n                        return [4 /*yield*/, this.initCamera()];\n                    case 2:\n                        // Initialize the camera\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.componentDidUnload = function () {\n        this.stopStream();\n        this.photoSrc && URL.revokeObjectURL(this.photoSrc);\n    };\n    class_1.prototype.hasImageCapture = function () {\n        return 'ImageCapture' in window;\n    };\n    /**\n     * Query the list of connected devices and figure out how many video inputs we have.\n     */\n    class_1.prototype.queryDevices = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var devices, videoDevices, e_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, navigator.mediaDevices.enumerateDevices()];\n                    case 1:\n                        devices = _a.sent();\n                        videoDevices = devices.filter(function (d) { return d.kind == 'videoinput'; });\n                        this.hasCamera = !!videoDevices.length;\n                        this.hasMultipleCameras = videoDevices.length > 1;\n                        return [3 /*break*/, 3];\n                    case 2:\n                        e_2 = _a.sent();\n                        this.deviceError = e_2;\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.initCamera = function (constraints) {\n        return __awaiter(this, void 0, void 0, function () {\n            var stream, e_3;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!constraints) {\n                            constraints = this.defaultConstraints;\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, navigator.mediaDevices.getUserMedia(Object.assign({ video: true, audio: false }, constraints))];\n                    case 2:\n                        stream = _a.sent();\n                        this.initStream(stream);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_3 = _a.sent();\n                        this.deviceError = e_3;\n                        this.handleNoDeviceError && this.handleNoDeviceError(e_3);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.initStream = function (stream) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.stream = stream;\n                        this.videoElement.srcObject = stream;\n                        if (!this.hasImageCapture()) return [3 /*break*/, 2];\n                        this.imageCapture = new window.ImageCapture(stream.getVideoTracks()[0]);\n                        return [4 /*yield*/, this.initPhotoCapabilities(this.imageCapture)];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        this.deviceError = 'No image capture';\n                        this.handleNoDeviceError && this.handleNoDeviceError();\n                        _a.label = 3;\n                    case 3:\n                        // Always re-render\n                        this.el.forceUpdate();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.initPhotoCapabilities = function (imageCapture) {\n        return __awaiter(this, void 0, void 0, function () {\n            var c;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, imageCapture.getPhotoCapabilities()];\n                    case 1:\n                        c = _a.sent();\n                        if (c.fillLightMode && c.fillLightMode.length > 1) {\n                            this.flashModes = c.fillLightMode.map(function (m) { return m; });\n                            // Try to recall the current flash mode\n                            if (this.flashMode) {\n                                this.flashMode = this.flashModes[this.flashModes.indexOf(this.flashMode)] || 'off';\n                                this.flashIndex = this.flashModes.indexOf(this.flashMode) || 0;\n                            }\n                            else {\n                                this.flashIndex = 0;\n                            }\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.stopStream = function () {\n        if (this.videoElement) {\n            this.videoElement.srcObject = null;\n        }\n        this.stream && this.stream.getTracks().forEach(function (track) { return track.stop(); });\n    };\n    class_1.prototype.capture = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var photo, e_4;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.hasImageCapture()) return [3 /*break*/, 5];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 4, , 5]);\n                        return [4 /*yield*/, this.imageCapture.takePhoto({\n                                fillLightMode: this.flashModes.length > 1 ? this.flashMode : undefined\n                            })];\n                    case 2:\n                        photo = _a.sent();\n                        return [4 /*yield*/, this.flashScreen()];\n                    case 3:\n                        _a.sent();\n                        this.promptAccept(photo);\n                        return [3 /*break*/, 5];\n                    case 4:\n                        e_4 = _a.sent();\n                        console.error('Unable to take photo!', e_4);\n                        return [3 /*break*/, 5];\n                    case 5:\n                        this.stopStream();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.promptAccept = function (photo) {\n        return __awaiter(this, void 0, void 0, function () {\n            var orientation;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.photo = photo;\n                        return [4 /*yield*/, this.getOrientation(photo)];\n                    case 1:\n                        orientation = _a.sent();\n                        console.debug('Got orientation', orientation);\n                        this.photoOrientation = orientation;\n                        if (orientation) {\n                            switch (orientation) {\n                                case 1:\n                                case 2:\n                                    this.rotation = 0;\n                                    break;\n                                case 3:\n                                case 4:\n                                    this.rotation = 180;\n                                    break;\n                                case 5:\n                                case 6:\n                                    this.rotation = 90;\n                                    break;\n                                case 7:\n                                case 8:\n                                    this.rotation = 270;\n                                    break;\n                            }\n                        }\n                        this.photoSrc = URL.createObjectURL(photo);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.getOrientation = function (file) {\n        return new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.onload = function (event) {\n                var view = new DataView(event.target.result);\n                if (view.getUint16(0, false) !== 0xFFD8) {\n                    return resolve(-2);\n                }\n                var length = view.byteLength;\n                var offset = 2;\n                while (offset < length) {\n                    var marker = view.getUint16(offset, false);\n                    offset += 2;\n                    if (marker === 0xFFE1) {\n                        if (view.getUint32(offset += 2, false) !== 0x45786966) {\n                            return resolve(-1);\n                        }\n                        var little = view.getUint16(offset += 6, false) === 0x4949;\n                        offset += view.getUint32(offset + 4, little);\n                        var tags = view.getUint16(offset, little);\n                        offset += 2;\n                        for (var i = 0; i < tags; i++) {\n                            if (view.getUint16(offset + (i * 12), little) === 0x0112) {\n                                return resolve(view.getUint16(offset + (i * 12) + 8, little));\n                            }\n                        }\n                    }\n                    else if ((marker & 0xFF00) !== 0xFF00) {\n                        break;\n                    }\n                    else {\n                        offset += view.getUint16(offset, false);\n                    }\n                }\n                return resolve(-1);\n            };\n            reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n        });\n    };\n    class_1.prototype.rotate = function () {\n        this.stopStream();\n        var track = this.stream && this.stream.getTracks()[0];\n        if (!track) {\n            return;\n        }\n        var c = track.getConstraints();\n        var facingMode = c.facingMode;\n        if (!facingMode) {\n            var c_1 = track.getCapabilities();\n            if (c_1.facingMode) {\n                facingMode = c_1.facingMode[0];\n            }\n        }\n        if (facingMode === 'environment') {\n            this.initCamera({\n                video: {\n                    facingMode: 'user'\n                }\n            });\n        }\n        else {\n            this.initCamera({\n                video: {\n                    facingMode: 'environment'\n                }\n            });\n        }\n    };\n    class_1.prototype.setFlashMode = function (mode) {\n        console.debug('New flash mode: ', mode);\n        this.flashMode = mode;\n    };\n    class_1.prototype.cycleFlash = function () {\n        if (this.flashModes.length > 0) {\n            this.flashIndex = (this.flashIndex + 1) % this.flashModes.length;\n            this.setFlashMode(this.flashModes[this.flashIndex]);\n        }\n    };\n    class_1.prototype.flashScreen = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, _reject) {\n                        _this.showShutterOverlay = true;\n                        setTimeout(function () {\n                            _this.showShutterOverlay = false;\n                            resolve();\n                        }, 100);\n                    })];\n            });\n        });\n    };\n    class_1.prototype.iconExit = function () {\n        return \"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Cg id='Icon_5_'%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M402.2,134L378,109.8c-1.6-1.6-4.1-1.6-5.7,0L258.8,223.4c-1.6,1.6-4.1,1.6-5.7,0L139.6,109.8 c-1.6-1.6-4.1-1.6-5.7,0L109.8,134c-1.6,1.6-1.6,4.1,0,5.7l113.5,113.5c1.6,1.6,1.6,4.1,0,5.7L109.8,372.4c-1.6,1.6-1.6,4.1,0,5.7 l24.1,24.1c1.6,1.6,4.1,1.6,5.7,0l113.5-113.5c1.6-1.6,4.1-1.6,5.7,0l113.5,113.5c1.6,1.6,4.1,1.6,5.7,0l24.1-24.1 c1.6-1.6,1.6-4.1,0-5.7L288.6,258.8c-1.6-1.6-1.6-4.1,0-5.7l113.5-113.5C403.7,138.1,403.7,135.5,402.2,134z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\";\n    };\n    class_1.prototype.iconPhotos = function () {\n        return ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"svg\", { xmlns: 'http://www.w3.org/2000/svg', width: '512', height: '512', viewBox: '0 0 512 512' }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"path\", { d: 'M450.29,112H142c-34,0-62,27.51-62,61.33V418.67C80,452.49,108,480,142,480H450c34,0,62-26.18,62-60V173.33C512,139.51,484.32,112,450.29,112Zm-77.15,61.34a46,46,0,1,1-46.28,46A46.19,46.19,0,0,1,373.14,173.33Zm-231.55,276c-17,0-29.86-13.75-29.86-30.66V353.85l90.46-80.79a46.54,46.54,0,0,1,63.44,1.83L328.27,337l-113,112.33ZM480,418.67a30.67,30.67,0,0,1-30.71,30.66H259L376.08,333a46.24,46.24,0,0,1,59.44-.16L480,370.59Z' }), (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"path\", { d: 'M384,32H64A64,64,0,0,0,0,96V352a64.11,64.11,0,0,0,48,62V152a72,72,0,0,1,72-72H446A64.11,64.11,0,0,0,384,32Z' })));\n    };\n    class_1.prototype.iconConfirm = function () {\n        return \"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Ccircle fill='%232CD865' cx='256' cy='256' r='256'/%3E%3Cg id='Icon_1_'%3E%3Cg%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M208,301.4l-55.4-55.5c-1.5-1.5-4-1.6-5.6-0.1l-23.4,22.3c-1.6,1.6-1.7,4.1-0.1,5.7l81.6,81.4 c3.1,3.1,8.2,3.1,11.3,0l171.8-171.7c1.6-1.6,1.6-4.2-0.1-5.7l-23.4-22.3c-1.6-1.5-4.1-1.5-5.6,0.1L213.7,301.4 C212.1,303,209.6,303,208,301.4z'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\";\n    };\n    class_1.prototype.iconReverseCamera = function () {\n        return \"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M352,0H160C72,0,0,72,0,160v192c0,88,72,160,160,160h192c88,0,160-72,160-160V160C512,72,440,0,352,0z M356.7,365.8l-3.7,3.3c-27,23.2-61.4,35.9-96.8,35.9c-72.4,0-135.8-54.7-147-125.6c-0.3-1.9-2-3.3-3.9-3.3H64 c-3.3,0-5.2-3.8-3.2-6.4l61.1-81.4c1.6-2.1,4.7-2.1,6.4-0.1l63.3,81.4c2,2.6,0.2,6.5-3.2,6.5h-40.6c-2.5,0-4.5,2.4-3.9,4.8 c11.5,51.5,59.2,90.6,112.4,90.6c26.4,0,51.8-9.7,73.7-27.9l3.1-2.5c1.6-1.3,3.9-1.1,5.3,0.3l18.5,18.6 C358.5,361.6,358.4,364.3,356.7,365.8z M451.4,245.6l-61,83.5c-1.6,2.2-4.8,2.2-6.4,0.1l-63.3-83.3c-2-2.6-0.1-6.4,3.2-6.4h40.8 c2.5,0,4.4-2.3,3.9-4.8c-5.1-24.2-17.8-46.5-36.5-63.7c-21.2-19.4-48.2-30.1-76-30.1c-26.5,0-52.6,9.7-73.7,27.3l-3.1,2.5 c-1.6,1.3-3.9,1.2-5.4-0.3l-18.5-18.5c-1.6-1.6-1.5-4.3,0.2-5.9l3.5-3.1c27-23.2,61.4-35.9,96.8-35.9c38,0,73.9,13.7,101.2,38.7 c23.2,21.1,40.3,55.2,45.7,90.1c0.3,1.9,1.9,3.4,3.9,3.4h41.3C451.4,239.2,453.3,243,451.4,245.6z'/%3E%3C/g%3E%3C/svg%3E\";\n    };\n    class_1.prototype.iconRetake = function () {\n        return \"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Ccircle fill='%23727A87' cx='256' cy='256' r='256'/%3E%3Cg id='Icon_5_'%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M394.2,142L370,117.8c-1.6-1.6-4.1-1.6-5.7,0L258.8,223.4c-1.6,1.6-4.1,1.6-5.7,0L147.6,117.8 c-1.6-1.6-4.1-1.6-5.7,0L117.8,142c-1.6,1.6-1.6,4.1,0,5.7l105.5,105.5c1.6,1.6,1.6,4.1,0,5.7L117.8,364.4c-1.6,1.6-1.6,4.1,0,5.7 l24.1,24.1c1.6,1.6,4.1,1.6,5.7,0l105.5-105.5c1.6-1.6,4.1-1.6,5.7,0l105.5,105.5c1.6,1.6,4.1,1.6,5.7,0l24.1-24.1 c1.6-1.6,1.6-4.1,0-5.7L288.6,258.8c-1.6-1.6-1.6-4.1,0-5.7l105.5-105.5C395.7,146.1,395.7,143.5,394.2,142z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\";\n    };\n    class_1.prototype.iconFlashOff = function () {\n        return \"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512;' xml:space='preserve'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Cg%3E%3Cpath class='st0' d='M498,483.7L42.3,28L14,56.4l149.8,149.8L91,293.8c-2.5,3-0.1,7.2,3.9,7.2h143.9c1.6,0,2.7,1.3,2.4,2.7 L197.6,507c-1,4.4,5.8,6.9,8.9,3.2l118.6-142.8L469.6,512L498,483.7z'/%3E%3Cpath class='st0' d='M449,218.2c2.5-3,0.1-7.2-3.9-7.2H301.2c-1.6,0-2.7-1.3-2.4-2.7L342.4,5c1-4.4-5.8-6.9-8.9-3.2L214.9,144.6 l161.3,161.3L449,218.2z'/%3E%3C/g%3E%3C/svg%3E\";\n    };\n    class_1.prototype.iconFlashOn = function () {\n        return \"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512;' xml:space='preserve'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Cpath class='st0' d='M287.2,211c-1.6,0-2.7-1.3-2.4-2.7L328.4,5c1-4.4-5.8-6.9-8.9-3.2L77,293.8c-2.5,3-0.1,7.2,3.9,7.2h143.9 c1.6,0,2.7,1.3,2.4,2.7L183.6,507c-1,4.4,5.8,6.9,8.9,3.2l242.5-292c2.5-3,0.1-7.2-3.9-7.2L287.2,211L287.2,211z'/%3E%3C/svg%3E\";\n    };\n    class_1.prototype.iconFlashAuto = function () {\n        return \"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' style='enable-background:new 0 0 512 512;' xml:space='preserve'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Cpath class='st0' d='M287.2,211c-1.6,0-2.7-1.3-2.4-2.7L328.4,5c1-4.4-5.8-6.9-8.9-3.2L77,293.8c-2.5,3-0.1,7.2,3.9,7.2h143.9 c1.6,0,2.7,1.3,2.4,2.7L183.6,507c-1,4.4,5.8,6.9,8.9,3.2l242.5-292c2.5-3,0.1-7.2-3.9-7.2L287.2,211L287.2,211z'/%3E%3Cg%3E%3Cpath class='st0' d='M321.3,186l74-186H438l74,186h-43.5l-11.9-32.5h-80.9l-12,32.5H321.3z M415.8,47.9l-27.2,70.7h54.9l-27.2-70.7 H415.8z'/%3E%3C/g%3E%3C/svg%3E\";\n    };\n    class_1.prototype.render = function () {\n        var _this = this;\n        // const acceptStyles = { transform: `rotate(${-this.rotation}deg)` };\n        var acceptStyles = {};\n        return ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"camera-wrapper\" }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"camera-header\" }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"section\", { class: \"items\" }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"item close\", onClick: function (e) { return _this.handleClose(e); } }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"img\", { src: this.iconExit() })), (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"item flash\", onClick: function (e) { return _this.handleFlashClick(e); } }, this.flashModes.length > 0 && ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", null, this.flashMode == 'off' ? (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"img\", { src: this.iconFlashOff() }) : '', this.flashMode == 'auto' ? (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"img\", { src: this.iconFlashAuto() }) : '', this.flashMode == 'flash' ? (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"img\", { src: this.iconFlashOn() }) : ''))))), (this.hasCamera === false || !!this.deviceError) && ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"no-device\" }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"h2\", null, this.noDevicesText), (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", { htmlFor: \"_pwa-elements-camera-input\" }, this.noDevicesButtonText), (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"input\", { type: \"file\", id: \"_pwa-elements-camera-input\", onChange: this.handleFileInputChange, accept: \"image/*\", class: \"select-file-button\" }))), this.photoSrc ? ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"accept\" }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"accept-image\", style: Object.assign({ backgroundImage: \"url(\" + this.photoSrc + \")\" }, acceptStyles) }))) : ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"camera-video\" }, this.showShutterOverlay && ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"shutter-overlay\" })), this.hasImageCapture() ? ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"video\", { ref: function (el) { return _this.videoElement = el; }, onLoadedMetaData: this.handleVideoMetadata, autoplay: true, playsinline: true })) : ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"canvas\", { ref: function (el) { return _this.canvasElement = el; }, width: \"100%\", height: \"100%\" })), (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"canvas\", { class: \"offscreen-image-render\", ref: function (e) { return _this.offscreenCanvas = e; }, width: \"100%\", height: \"100%\" }))), this.hasCamera && ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"camera-footer\" }, !this.photo ? ([\n            (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"pick-image\", onClick: this.handlePickFile }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", { htmlFor: \"_pwa-elements-file-pick\" }, this.iconPhotos()), (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"input\", { type: \"file\", id: \"_pwa-elements-file-pick\", onChange: this.handleFileInputChange, accept: \"image/*\", class: \"pick-image-button\" })),\n            (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"shutter\", onClick: this.handleShutterClick }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"shutter-button\" })),\n            (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"rotate\", onClick: this.handleRotateClick }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"img\", { src: this.iconReverseCamera() })),\n        ]) : ((0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"section\", { class: \"items\" }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"item accept-cancel\", onClick: function (e) { return _this.handleCancelPhoto(e); } }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"img\", { src: this.iconRetake() })), (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"item accept-use\", onClick: function (e) { return _this.handleAcceptPhoto(e); } }, (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"img\", { src: this.iconConfirm() }))))))));\n    };\n    Object.defineProperty(class_1, \"assetsDirs\", {\n        get: function () { return [\"icons\"]; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(class_1.prototype, \"el\", {\n        get: function () { return (0,_core_f86805ad_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(class_1, \"style\", {\n        get: function () { return \":host{--header-height:4em;--footer-height:9em;--header-height-landscape:3em;--footer-height-landscape:6em;--shutter-size:6em;--icon-size-header:1.5em;--icon-size-footer:2.5em;--margin-size-header:1.5em;--margin-size-footer:2.0em;font-family:-apple-system,BlinkMacSystemFont,“Segoe UI”,“Roboto”,“Droid Sans”,“Helvetica Neue”,sans-serif;display:block}.items,:host{width:100%;height:100%}.items{-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.items .item{-ms-flex:1;flex:1;text-align:center}.items .item:first-child{text-align:left}.items .item:last-child{text-align:right}.camera-wrapper{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%}.camera-header{color:#fff;background-color:#000;height:var(--header-height)}.camera-header .items{padding:var(--margin-size-header)}.camera-footer{position:relative;color:#fff;background-color:#000;height:var(--footer-height)}.camera-footer .items{padding:var(--margin-size-footer)}\\@media (max-height:375px){.camera-header{--header-height:var(--header-height-landscape)}.camera-footer{--footer-height:var(--footer-height-landscape)}.camera-footer .shutter{--shutter-size:4em}}.camera-video{position:relative;-ms-flex:1;flex:1;overflow:hidden}.camera-video,video{background-color:#000}video{width:100%;height:100%;max-height:100%;min-height:100%;-o-object-fit:cover;object-fit:cover}.pick-image{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;position:absolute;left:var(--margin-size-footer);top:0;height:100%;width:var(--icon-size-footer);color:#fff}.pick-image input{visibility:hidden}.pick-image svg{cursor:pointer;fill:#fff;width:var(--icon-size-footer);height:var(--icon-size-footer)}.shutter{position:absolute;left:50%;top:50%;width:var(--shutter-size);height:var(--shutter-size);margin-top:calc(var(--shutter-size) / -2);margin-left:calc(var(--shutter-size) / -2);border-radius:100%;background-color:#c6cdd8;padding:12px;-webkit-box-sizing:border-box;box-sizing:border-box}.shutter:active .shutter-button{background-color:#9da9bb}.shutter-button{background-color:#fff;border-radius:100%;width:100%;height:100%}.rotate{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;position:absolute;right:var(--margin-size-footer);top:0;height:100%;color:#fff}.rotate,.rotate img{width:var(--icon-size-footer)}.rotate img{height:var(--icon-size-footer)}.shutter-overlay{z-index:5;position:absolute;width:100%;height:100%;background-color:#000}.error{width:100%;height:100%;-ms-flex-pack:center;-ms-flex-align:center}.error,.no-device{color:#fff;display:-ms-flexbox;display:flex;justify-content:center;align-items:center}.no-device{background-color:#000;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;-ms-flex-pack:center}.no-device label{cursor:pointer;background:#fff;border-radius:6px;padding:6px 8px;color:#000}.no-device input{visibility:hidden;height:0;margin-top:16px}.accept{background-color:#000;-ms-flex:1;flex:1;overflow:hidden}.accept .accept-image{width:100%;height:100%;max-height:100%;background-position:50%;background-size:cover;background-repeat:no-repeat}.close img{cursor:pointer}.close img,.flash img{width:var(--icon-size-header);height:var(--icon-size-header)}.accept-cancel img,.accept-use img{width:var(--icon-size-footer);height:var(--icon-size-footer)}.offscreen-image-render{top:0;left:0;visibility:hidden;pointer-events:none;width:100%;height:100%}\"; },\n        enumerable: true,\n        configurable: true\n    });\n    return class_1;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsV0FBVztBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLHNCQUFzQjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsVUFBVTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNrQyIsInNvdXJjZXMiOlsid2VicGFjazovL3N0dWRlbnQtbWlzLW1vYmlsZS1hcHAvLi9ub2RlX21vZHVsZXMvQGlvbmljL3B3YS1lbGVtZW50cy9kaXN0L2VzbS1lczUvcHdhLWNhbWVyYS5lbnRyeS5qcz9kYThiIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGQgYXMgZ2V0Q29udGV4dCwgaCwgZyBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9jb3JlLWY4NjgwNWFkLmpzJztcbi8qKlxuICogTWVkaWFTdHJlYW0gSW1hZ2VDYXB0dXJlIHBvbHlmaWxsXG4gKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIEltYWdlQ2FwdHVyZSA9IHdpbmRvdy5JbWFnZUNhcHR1cmU7XG5pZiAodHlwZW9mIEltYWdlQ2FwdHVyZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBJbWFnZUNhcHR1cmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUT0RPIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNjb25zdHJ1Y3RvcnNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtNZWRpYVN0cmVhbVRyYWNrfSB2aWRlb1N0cmVhbVRyYWNrIC0gQSBNZWRpYVN0cmVhbVRyYWNrIG9mIHRoZSAndmlkZW8nIGtpbmRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIEltYWdlQ2FwdHVyZSh2aWRlb1N0cmVhbVRyYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHZpZGVvU3RyZWFtVHJhY2sua2luZCAhPT0gJ3ZpZGVvJylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdOb3RTdXBwb3J0ZWRFcnJvcicpO1xuICAgICAgICAgICAgdGhpcy5fdmlkZW9TdHJlYW1UcmFjayA9IHZpZGVvU3RyZWFtVHJhY2s7XG4gICAgICAgICAgICBpZiAoISgncmVhZHlTdGF0ZScgaW4gdGhpcy5fdmlkZW9TdHJlYW1UcmFjaykpIHtcbiAgICAgICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3IgRmlyZWZveFxuICAgICAgICAgICAgICAgIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSA9ICdsaXZlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1lZGlhU3RyZWFtIGNvbnN0cnVjdG9yIG5vdCBhdmFpbGFibGUgdW50aWwgQ2hyb21lIDU1IC0gaHR0cHM6Ly93d3cuY2hyb21lc3RhdHVzLmNvbS9mZWF0dXJlLzU5MTIxNzI1NDY3NTI1MTJcbiAgICAgICAgICAgIHRoaXMuX3ByZXZpZXdTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oW3ZpZGVvU3RyZWFtVHJhY2tdKTtcbiAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50UGxheWluZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCByZXNvbHZlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKEhUTUxNZWRpYUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmNPYmplY3QgPSB0aGlzLl9wcmV2aWV3U3RyZWFtOyAvLyBTYWZhcmkgMTEgZG9lc24ndCBhbGxvdyB1c2Ugb2YgY3JlYXRlT2JqZWN0VVJMIGZvciBNZWRpYVN0cmVhbVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLl9wcmV2aWV3U3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50Lm11dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZSgncGxheXNpbmxpbmUnLCAnJyk7IC8vIFJlcXVpcmVkIGJ5IFNhZmFyaSBvbiBpT1MgMTEuIFNlZSBodHRwczovL3dlYmtpdC5vcmcvYmxvZy82Nzg0XG4gICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wbGF5KCk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIC8vIFRPRE8gRmlyZWZveCBoYXMgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL09mZnNjcmVlbkNhbnZhc1xuICAgICAgICAgICAgdGhpcy5jYW52YXMyZENvbnRleHQgPSB0aGlzLmNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW1hZ2VDYXB0dXJlLnByb3RvdHlwZSwgXCJ2aWRlb1N0cmVhbVRyYWNrXCIsIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL21lZGlhY2FwdHVyZS1pbWFnZS9pbmRleC5odG1sI2RvbS1pbWFnZWNhcHR1cmUtdmlkZW9zdHJlYW10cmFja1xuICAgICAgICAgICAgICogQHJldHVybiB7TWVkaWFTdHJlYW1UcmFja30gVGhlIE1lZGlhU3RyZWFtVHJhY2sgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl92aWRlb1N0cmVhbVRyYWNrO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLWdldHBob3RvY2FwYWJpbGl0aWVzXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8UGhvdG9DYXBhYmlsaXRpZXM+fSBGdWxmaWxsZWQgcHJvbWlzZSB3aXRoXG4gICAgICAgICAqIFtQaG90b0NhcGFiaWxpdGllc10oaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2lkbC1kZWYtcGhvdG9jYXBhYmlsaXRpZXMpXG4gICAgICAgICAqIG9iamVjdCBvbiBzdWNjZXNzLCByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgICAgICovXG4gICAgICAgIEltYWdlQ2FwdHVyZS5wcm90b3R5cGUuZ2V0UGhvdG9DYXBhYmlsaXRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JHUEMocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3czYy9tZWRpYWNhcHR1cmUtaW1hZ2UvaXNzdWVzLzk3XG4gICAgICAgICAgICAgICAgdmFyIE1lZGlhU2V0dGluZ3NSYW5nZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudDogMCwgbWluOiAwLCBtYXg6IDAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgZXhwb3N1cmVDb21wZW5zYXRpb246IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgZXhwb3N1cmVNb2RlOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgIGZpbGxMaWdodE1vZGU6IFsnbm9uZSddLFxuICAgICAgICAgICAgICAgICAgICBmb2N1c01vZGU6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VIZWlnaHQ6IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VXaWR0aDogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgICAgICAgICAgICBpc286IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgcmVkRXllUmVkdWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgd2hpdGVCYWxhbmNlTW9kZTogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICB6b29tOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ09wZXJhdGlvbkVycm9yJykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLXNldG9wdGlvbnNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBob3RvU2V0dGluZ3MgLSBQaG90byBzZXR0aW5ncyBkaWN0aW9uYXJ5LCBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jaWRsLWRlZi1waG90b3NldHRpbmdzXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IEZ1bGZpbGxlZCBwcm9taXNlIG9uIHN1Y2Nlc3MsIHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAgICAgKi9cbiAgICAgICAgSW1hZ2VDYXB0dXJlLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gKF9waG90b1NldHRpbmdzKSB7XG4gICAgICAgICAgICBpZiAoX3Bob3RvU2V0dGluZ3MgPT09IHZvaWQgMCkgeyBfcGhvdG9TZXR0aW5ncyA9IHt9OyB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JTTyhfcmVzb2x2ZSwgX3JlamVjdCkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogVE9ET1xuICAgICAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLXRha2VwaG90b1xuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEJsb2I+fSBGdWxmaWxsZWQgcHJvbWlzZSB3aXRoIFtCbG9iXShodHRwczovL3d3dy53My5vcmcvVFIvRmlsZUFQSS8jYmxvYilcbiAgICAgICAgICogYXJndW1lbnQgb24gc3VjY2VzczsgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICAgICAqL1xuICAgICAgICBJbWFnZUNhcHR1cmUucHJvdG90eXBlLnRha2VQaG90byA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvclRQKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIC8vIGBJZiB0aGUgcmVhZHlTdGF0ZSBvZiB0aGUgTWVkaWFTdHJlYW1UcmFjayBwcm92aWRlZCBpbiB0aGUgY29uc3RydWN0b3IgaXMgbm90IGxpdmUsXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIGEgbmV3IERPTUV4Y2VwdGlvbiB3aG9zZSBuYW1lIGlzIFwiSW52YWxpZFN0YXRlRXJyb3JcIi5gXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSAhPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IERPTUV4Y2VwdGlvbignSW52YWxpZFN0YXRlRXJyb3InKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYudmlkZW9FbGVtZW50UGxheWluZy50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC53aWR0aCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbnZhczJkQ29udGV4dC5kcmF3SW1hZ2Uoc2VsZi52aWRlb0VsZW1lbnQsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LnRvQmxvYihyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdVbmtub3duRXJyb3InKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS1ncmFiZnJhbWVcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxJbWFnZUJpdG1hcD59IEZ1bGZpbGxlZCBwcm9taXNlIHdpdGhcbiAgICAgICAgICogW0ltYWdlQml0bWFwXShodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUxL3dlYmFwcGFwaXMuaHRtbCN3ZWJhcHBhcGlzLWltYWdlcylcbiAgICAgICAgICogYXJndW1lbnQgb24gc3VjY2VzczsgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICAgICAqL1xuICAgICAgICBJbWFnZUNhcHR1cmUucHJvdG90eXBlLmdyYWJGcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvckdGKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIC8vIGBJZiB0aGUgcmVhZHlTdGF0ZSBvZiB0aGUgTWVkaWFTdHJlYW1UcmFjayBwcm92aWRlZCBpbiB0aGUgY29uc3RydWN0b3IgaXMgbm90IGxpdmUsXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIGEgbmV3IERPTUV4Y2VwdGlvbiB3aG9zZSBuYW1lIGlzIFwiSW52YWxpZFN0YXRlRXJyb3JcIi5gXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSAhPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IERPTUV4Y2VwdGlvbignSW52YWxpZFN0YXRlRXJyb3InKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYudmlkZW9FbGVtZW50UGxheWluZy50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC53aWR0aCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbnZhczJkQ29udGV4dC5kcmF3SW1hZ2Uoc2VsZi52aWRlb0VsZW1lbnQsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBwb2x5ZmlsbCBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW1hZ2VCaXRtYXBGYWN0b3JpZXMvY3JlYXRlSW1hZ2VCaXRtYXAgZm9yIElFXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHdpbmRvdy5jcmVhdGVJbWFnZUJpdG1hcChzZWxmLmNhbnZhc0VsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdVbmtub3duRXJyb3InKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW1hZ2VDYXB0dXJlO1xuICAgIH0oKSk7XG59XG53aW5kb3cuSW1hZ2VDYXB0dXJlID0gSW1hZ2VDYXB0dXJlO1xudmFyIENhbWVyYVBXQSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjbGFzc18xKGhvc3RSZWYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5mYWNpbmdNb2RlID0gJ3VzZXInO1xuICAgICAgICB0aGlzLm5vRGV2aWNlc1RleHQgPSAnTm8gY2FtZXJhIGZvdW5kJztcbiAgICAgICAgdGhpcy5ub0RldmljZXNCdXR0b25UZXh0ID0gJ0Nob29zZSBpbWFnZSc7XG4gICAgICAgIHRoaXMuc2hvd1NodXR0ZXJPdmVybGF5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZmxhc2hJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuaGFzQ2FtZXJhID0gbnVsbDtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuZGV2aWNlRXJyb3IgPSBudWxsO1xuICAgICAgICAvLyBXaGV0aGVyIHRoZSBkZXZpY2UgaGFzIG11bHRpcGxlIGNhbWVyYXMgKGZyb250L2JhY2spXG4gICAgICAgIHRoaXMuaGFzTXVsdGlwbGVDYW1lcmFzID0gZmFsc2U7XG4gICAgICAgIC8vIFdoZXRoZXIgdGhlIGRldmljZSBoYXMgZmxhc2ggc3VwcG9ydFxuICAgICAgICB0aGlzLmhhc0ZsYXNoID0gZmFsc2U7XG4gICAgICAgIC8vIEZsYXNoIG1vZGVzIGZvciBjYW1lcmFcbiAgICAgICAgdGhpcy5mbGFzaE1vZGVzID0gW107XG4gICAgICAgIC8vIEN1cnJlbnQgZmxhc2ggbW9kZVxuICAgICAgICB0aGlzLmZsYXNoTW9kZSA9ICdvZmYnO1xuICAgICAgICB0aGlzLmhhbmRsZVBpY2tGaWxlID0gZnVuY3Rpb24gKF9lKSB7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlU2h1dHRlckNsaWNrID0gZnVuY3Rpb24gKF9lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdzaHV0dGVyIGNsaWNrJyk7XG4gICAgICAgICAgICBfdGhpcy5jYXB0dXJlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlUm90YXRlQ2xpY2sgPSBmdW5jdGlvbiAoX2UpIHtcbiAgICAgICAgICAgIF90aGlzLnJvdGF0ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUNsb3NlID0gZnVuY3Rpb24gKF9lKSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVQaG90byAmJiBfdGhpcy5oYW5kbGVQaG90byhudWxsKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVGbGFzaENsaWNrID0gZnVuY3Rpb24gKF9lKSB7XG4gICAgICAgICAgICBfdGhpcy5jeWNsZUZsYXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlQ2FuY2VsUGhvdG8gPSBmdW5jdGlvbiAoX2UpIHtcbiAgICAgICAgICAgIHZhciB0cmFjayA9IF90aGlzLnN0cmVhbSAmJiBfdGhpcy5zdHJlYW0uZ2V0VHJhY2tzKClbMF07XG4gICAgICAgICAgICB2YXIgYyA9IHRyYWNrICYmIHRyYWNrLmdldENvbnN0cmFpbnRzKCk7XG4gICAgICAgICAgICBfdGhpcy5waG90byA9IG51bGw7XG4gICAgICAgICAgICBfdGhpcy5waG90b1NyYyA9IG51bGw7XG4gICAgICAgICAgICBpZiAoYykge1xuICAgICAgICAgICAgICAgIF90aGlzLmluaXRDYW1lcmEoe1xuICAgICAgICAgICAgICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFjaW5nTW9kZTogYy5mYWNpbmdNb2RlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmluaXRDYW1lcmEoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVBY2NlcHRQaG90byA9IGZ1bmN0aW9uIChfZSkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlUGhvdG8gJiYgX3RoaXMuaGFuZGxlUGhvdG8oX3RoaXMucGhvdG8pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUZpbGVJbnB1dENoYW5nZSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXQsIGZpbGUsIG9yaWVudGF0aW9uLCBlXzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGlucHV0LmZpbGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRPcmllbnRhdGlvbihmaWxlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnR290IG9yaWVudGF0aW9uJywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waG90b09yaWVudGF0aW9uID0gb3JpZW50YXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUGhvdG8gJiYgdGhpcy5oYW5kbGVQaG90byhmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHRoaXMuaGFuZGxlVmlkZW9NZXRhZGF0YSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdWaWRlbyBtZXRhZGF0YScsIGUpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzU2VydmVyID0gZ2V0Q29udGV4dCh0aGlzLCBcImlzU2VydmVyXCIpO1xuICAgIH1cbiAgICBjbGFzc18xLnByb3RvdHlwZS5jb21wb25lbnREaWRMb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1NlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdENvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2luZ01vZGU6IHRoaXMuZmFjaW5nTW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaWd1cmUgb3V0IGhvdyBtYW55IGNhbWVyYXMgd2UgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5xdWVyeURldmljZXMoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpZ3VyZSBvdXQgaG93IG1hbnkgY2FtZXJhcyB3ZSBoYXZlXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBjYW1lcmFcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW5pdENhbWVyYSgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgY2FtZXJhXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuY29tcG9uZW50RGlkVW5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0b3BTdHJlYW0oKTtcbiAgICAgICAgdGhpcy5waG90b1NyYyAmJiBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMucGhvdG9TcmMpO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuaGFzSW1hZ2VDYXB0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ0ltYWdlQ2FwdHVyZScgaW4gd2luZG93O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUXVlcnkgdGhlIGxpc3Qgb2YgY29ubmVjdGVkIGRldmljZXMgYW5kIGZpZ3VyZSBvdXQgaG93IG1hbnkgdmlkZW8gaW5wdXRzIHdlIGhhdmUuXG4gICAgICovXG4gICAgY2xhc3NfMS5wcm90b3R5cGUucXVlcnlEZXZpY2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGV2aWNlcywgdmlkZW9EZXZpY2VzLCBlXzI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9EZXZpY2VzID0gZGV2aWNlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQua2luZCA9PSAndmlkZW9pbnB1dCc7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNDYW1lcmEgPSAhIXZpZGVvRGV2aWNlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc011bHRpcGxlQ2FtZXJhcyA9IHZpZGVvRGV2aWNlcy5sZW5ndGggPiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlRXJyb3IgPSBlXzI7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuaW5pdENhbWVyYSA9IGZ1bmN0aW9uIChjb25zdHJhaW50cykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3RyZWFtLCBlXzM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RyYWludHMgPSB0aGlzLmRlZmF1bHRDb25zdHJhaW50cztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKE9iamVjdC5hc3NpZ24oeyB2aWRlbzogdHJ1ZSwgYXVkaW86IGZhbHNlIH0sIGNvbnN0cmFpbnRzKSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0gPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRTdHJlYW0oc3RyZWFtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldmljZUVycm9yID0gZV8zO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOb0RldmljZUVycm9yICYmIHRoaXMuaGFuZGxlTm9EZXZpY2VFcnJvcihlXzMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLmluaXRTdHJlYW0gPSBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc0ltYWdlQ2FwdHVyZSgpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VDYXB0dXJlID0gbmV3IHdpbmRvdy5JbWFnZUNhcHR1cmUoc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbml0UGhvdG9DYXBhYmlsaXRpZXModGhpcy5pbWFnZUNhcHR1cmUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlRXJyb3IgPSAnTm8gaW1hZ2UgY2FwdHVyZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5vRGV2aWNlRXJyb3IgJiYgdGhpcy5oYW5kbGVOb0RldmljZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyByZS1yZW5kZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWwuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjbGFzc18xLnByb3RvdHlwZS5pbml0UGhvdG9DYXBhYmlsaXRpZXMgPSBmdW5jdGlvbiAoaW1hZ2VDYXB0dXJlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbWFnZUNhcHR1cmUuZ2V0UGhvdG9DYXBhYmlsaXRpZXMoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5maWxsTGlnaHRNb2RlICYmIGMuZmlsbExpZ2h0TW9kZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFzaE1vZGVzID0gYy5maWxsTGlnaHRNb2RlLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gbTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHJlY2FsbCB0aGUgY3VycmVudCBmbGFzaCBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmxhc2hNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhc2hNb2RlID0gdGhpcy5mbGFzaE1vZGVzW3RoaXMuZmxhc2hNb2Rlcy5pbmRleE9mKHRoaXMuZmxhc2hNb2RlKV0gfHwgJ29mZic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhc2hJbmRleCA9IHRoaXMuZmxhc2hNb2Rlcy5pbmRleE9mKHRoaXMuZmxhc2hNb2RlKSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFzaEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuc3RvcFN0cmVhbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmNPYmplY3QgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RyZWFtICYmIHRoaXMuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7IHJldHVybiB0cmFjay5zdG9wKCk7IH0pO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuY2FwdHVyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBob3RvLCBlXzQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzSW1hZ2VDYXB0dXJlKCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDQsICwgNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbWFnZUNhcHR1cmUudGFrZVBob3RvKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbExpZ2h0TW9kZTogdGhpcy5mbGFzaE1vZGVzLmxlbmd0aCA+IDEgPyB0aGlzLmZsYXNoTW9kZSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG8gPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZsYXNoU2NyZWVuKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb21wdEFjY2VwdChwaG90byk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZV80ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIHRha2UgcGhvdG8hJywgZV80KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BTdHJlYW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjbGFzc18xLnByb3RvdHlwZS5wcm9tcHRBY2NlcHQgPSBmdW5jdGlvbiAocGhvdG8pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9yaWVudGF0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waG90byA9IHBob3RvO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRPcmllbnRhdGlvbihwaG90byldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0dvdCBvcmllbnRhdGlvbicsIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGhvdG9PcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWVudGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcmllbnRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDE4MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSA5MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSAyNzA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBob3RvU3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChwaG90byk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0T3JpZW50YXRpb24gPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldFVpbnQxNigwLCBmYWxzZSkgIT09IDB4RkZEOCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgtMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSB2aWV3LmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IDI7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gdmlldy5nZXRVaW50MTYob2Zmc2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAyO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyID09PSAweEZGRTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldFVpbnQzMihvZmZzZXQgKz0gMiwgZmFsc2UpICE9PSAweDQ1Nzg2OTY2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpdHRsZSA9IHZpZXcuZ2V0VWludDE2KG9mZnNldCArPSA2LCBmYWxzZSkgPT09IDB4NDk0OTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSB2aWV3LmdldFVpbnQzMihvZmZzZXQgKyA0LCBsaXR0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZ3MgPSB2aWV3LmdldFVpbnQxNihvZmZzZXQsIGxpdHRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFnczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXcuZ2V0VWludDE2KG9mZnNldCArIChpICogMTIpLCBsaXR0bGUpID09PSAweDAxMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodmlldy5nZXRVaW50MTYob2Zmc2V0ICsgKGkgKiAxMikgKyA4LCBsaXR0bGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKG1hcmtlciAmIDB4RkYwMCkgIT09IDB4RkYwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gdmlldy5nZXRVaW50MTYob2Zmc2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoLTEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlLnNsaWNlKDAsIDY0ICogMTAyNCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdG9wU3RyZWFtKCk7XG4gICAgICAgIHZhciB0cmFjayA9IHRoaXMuc3RyZWFtICYmIHRoaXMuc3RyZWFtLmdldFRyYWNrcygpWzBdO1xuICAgICAgICBpZiAoIXRyYWNrKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGMgPSB0cmFjay5nZXRDb25zdHJhaW50cygpO1xuICAgICAgICB2YXIgZmFjaW5nTW9kZSA9IGMuZmFjaW5nTW9kZTtcbiAgICAgICAgaWYgKCFmYWNpbmdNb2RlKSB7XG4gICAgICAgICAgICB2YXIgY18xID0gdHJhY2suZ2V0Q2FwYWJpbGl0aWVzKCk7XG4gICAgICAgICAgICBpZiAoY18xLmZhY2luZ01vZGUpIHtcbiAgICAgICAgICAgICAgICBmYWNpbmdNb2RlID0gY18xLmZhY2luZ01vZGVbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZhY2luZ01vZGUgPT09ICdlbnZpcm9ubWVudCcpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdENhbWVyYSh7XG4gICAgICAgICAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICAgICAgICAgICAgZmFjaW5nTW9kZTogJ3VzZXInXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluaXRDYW1lcmEoe1xuICAgICAgICAgICAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgICAgICAgICAgIGZhY2luZ01vZGU6ICdlbnZpcm9ubWVudCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuc2V0Rmxhc2hNb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnTmV3IGZsYXNoIG1vZGU6ICcsIG1vZGUpO1xuICAgICAgICB0aGlzLmZsYXNoTW9kZSA9IG1vZGU7XG4gICAgfTtcbiAgICBjbGFzc18xLnByb3RvdHlwZS5jeWNsZUZsYXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5mbGFzaE1vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZmxhc2hJbmRleCA9ICh0aGlzLmZsYXNoSW5kZXggKyAxKSAlIHRoaXMuZmxhc2hNb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnNldEZsYXNoTW9kZSh0aGlzLmZsYXNoTW9kZXNbdGhpcy5mbGFzaEluZGV4XSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLmZsYXNoU2NyZWVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgX3JlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd1NodXR0ZXJPdmVybGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dTaHV0dGVyT3ZlcmxheSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLmljb25FeGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHZlcnNpb249JzEuMScgaWQ9J0xheWVyXzEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHg9JzBweCcgeT0nMHB4JyB2aWV3Qm94PScwIDAgNTEyIDUxMicgZW5hYmxlLWJhY2tncm91bmQ9J25ldyAwIDAgNTEyIDUxMicgeG1sOnNwYWNlPSdwcmVzZXJ2ZSclM0UlM0NnIGlkPSdJY29uXzVfJyUzRSUzQ2clM0UlM0NwYXRoIGZpbGw9JyUyM0ZGRkZGRicgZD0nTTQwMi4yLDEzNEwzNzgsMTA5LjhjLTEuNi0xLjYtNC4xLTEuNi01LjcsMEwyNTguOCwyMjMuNGMtMS42LDEuNi00LjEsMS42LTUuNywwTDEzOS42LDEwOS44IGMtMS42LTEuNi00LjEtMS42LTUuNywwTDEwOS44LDEzNGMtMS42LDEuNi0xLjYsNC4xLDAsNS43bDExMy41LDExMy41YzEuNiwxLjYsMS42LDQuMSwwLDUuN0wxMDkuOCwzNzIuNGMtMS42LDEuNi0xLjYsNC4xLDAsNS43IGwyNC4xLDI0LjFjMS42LDEuNiw0LjEsMS42LDUuNywwbDExMy41LTExMy41YzEuNi0xLjYsNC4xLTEuNiw1LjcsMGwxMTMuNSwxMTMuNWMxLjYsMS42LDQuMSwxLjYsNS43LDBsMjQuMS0yNC4xIGMxLjYtMS42LDEuNi00LjEsMC01LjdMMjg4LjYsMjU4LjhjLTEuNi0xLjYtMS42LTQuMSwwLTUuN2wxMTMuNS0xMTMuNUM0MDMuNywxMzguMSw0MDMuNywxMzUuNSw0MDIuMiwxMzR6Jy8lM0UlM0MvZyUzRSUzQy9nJTNFJTNDL3N2ZyUzRVwiO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuaWNvblBob3RvcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChoKFwic3ZnXCIsIHsgeG1sbnM6ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIHdpZHRoOiAnNTEyJywgaGVpZ2h0OiAnNTEyJywgdmlld0JveDogJzAgMCA1MTIgNTEyJyB9LCBoKFwicGF0aFwiLCB7IGQ6ICdNNDUwLjI5LDExMkgxNDJjLTM0LDAtNjIsMjcuNTEtNjIsNjEuMzNWNDE4LjY3QzgwLDQ1Mi40OSwxMDgsNDgwLDE0Miw0ODBINDUwYzM0LDAsNjItMjYuMTgsNjItNjBWMTczLjMzQzUxMiwxMzkuNTEsNDg0LjMyLDExMiw0NTAuMjksMTEyWm0tNzcuMTUsNjEuMzRhNDYsNDYsMCwxLDEtNDYuMjgsNDZBNDYuMTksNDYuMTksMCwwLDEsMzczLjE0LDE3My4zM1ptLTIzMS41NSwyNzZjLTE3LDAtMjkuODYtMTMuNzUtMjkuODYtMzAuNjZWMzUzLjg1bDkwLjQ2LTgwLjc5YTQ2LjU0LDQ2LjU0LDAsMCwxLDYzLjQ0LDEuODNMMzI4LjI3LDMzN2wtMTEzLDExMi4zM1pNNDgwLDQxOC42N2EzMC42NywzMC42NywwLDAsMS0zMC43MSwzMC42NkgyNTlMMzc2LjA4LDMzM2E0Ni4yNCw0Ni4yNCwwLDAsMSw1OS40NC0uMTZMNDgwLDM3MC41OVonIH0pLCBoKFwicGF0aFwiLCB7IGQ6ICdNMzg0LDMySDY0QTY0LDY0LDAsMCwwLDAsOTZWMzUyYTY0LjExLDY0LjExLDAsMCwwLDQ4LDYyVjE1MmE3Miw3MiwwLDAsMSw3Mi03Mkg0NDZBNjQuMTEsNjQuMTEsMCwwLDAsMzg0LDMyWicgfSkpKTtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLmljb25Db25maXJtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHZlcnNpb249JzEuMScgaWQ9J0xheWVyXzEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHg9JzBweCcgeT0nMHB4JyB2aWV3Qm94PScwIDAgNTEyIDUxMicgZW5hYmxlLWJhY2tncm91bmQ9J25ldyAwIDAgNTEyIDUxMicgeG1sOnNwYWNlPSdwcmVzZXJ2ZSclM0UlM0NjaXJjbGUgZmlsbD0nJTIzMkNEODY1JyBjeD0nMjU2JyBjeT0nMjU2JyByPScyNTYnLyUzRSUzQ2cgaWQ9J0ljb25fMV8nJTNFJTNDZyUzRSUzQ2clM0UlM0NwYXRoIGZpbGw9JyUyM0ZGRkZGRicgZD0nTTIwOCwzMDEuNGwtNTUuNC01NS41Yy0xLjUtMS41LTQtMS42LTUuNi0wLjFsLTIzLjQsMjIuM2MtMS42LDEuNi0xLjcsNC4xLTAuMSw1LjdsODEuNiw4MS40IGMzLjEsMy4xLDguMiwzLjEsMTEuMywwbDE3MS44LTE3MS43YzEuNi0xLjYsMS42LTQuMi0wLjEtNS43bC0yMy40LTIyLjNjLTEuNi0xLjUtNC4xLTEuNS01LjYsMC4xTDIxMy43LDMwMS40IEMyMTIuMSwzMDMsMjA5LjYsMzAzLDIwOCwzMDEuNHonLyUzRSUzQy9nJTNFJTNDL2clM0UlM0MvZyUzRSUzQy9zdmclM0VcIjtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLmljb25SZXZlcnNlQ2FtZXJhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHZlcnNpb249JzEuMScgaWQ9J0xheWVyXzEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHg9JzBweCcgeT0nMHB4JyB2aWV3Qm94PScwIDAgNTEyIDUxMicgZW5hYmxlLWJhY2tncm91bmQ9J25ldyAwIDAgNTEyIDUxMicgeG1sOnNwYWNlPSdwcmVzZXJ2ZSclM0UlM0NnJTNFJTNDcGF0aCBmaWxsPSclMjNGRkZGRkYnIGQ9J00zNTIsMEgxNjBDNzIsMCwwLDcyLDAsMTYwdjE5MmMwLDg4LDcyLDE2MCwxNjAsMTYwaDE5MmM4OCwwLDE2MC03MiwxNjAtMTYwVjE2MEM1MTIsNzIsNDQwLDAsMzUyLDB6IE0zNTYuNywzNjUuOGwtMy43LDMuM2MtMjcsMjMuMi02MS40LDM1LjktOTYuOCwzNS45Yy03Mi40LDAtMTM1LjgtNTQuNy0xNDctMTI1LjZjLTAuMy0xLjktMi0zLjMtMy45LTMuM0g2NCBjLTMuMywwLTUuMi0zLjgtMy4yLTYuNGw2MS4xLTgxLjRjMS42LTIuMSw0LjctMi4xLDYuNC0wLjFsNjMuMyw4MS40YzIsMi42LDAuMiw2LjUtMy4yLDYuNWgtNDAuNmMtMi41LDAtNC41LDIuNC0zLjksNC44IGMxMS41LDUxLjUsNTkuMiw5MC42LDExMi40LDkwLjZjMjYuNCwwLDUxLjgtOS43LDczLjctMjcuOWwzLjEtMi41YzEuNi0xLjMsMy45LTEuMSw1LjMsMC4zbDE4LjUsMTguNiBDMzU4LjUsMzYxLjYsMzU4LjQsMzY0LjMsMzU2LjcsMzY1Ljh6IE00NTEuNCwyNDUuNmwtNjEsODMuNWMtMS42LDIuMi00LjgsMi4yLTYuNCwwLjFsLTYzLjMtODMuM2MtMi0yLjYtMC4xLTYuNCwzLjItNi40aDQwLjggYzIuNSwwLDQuNC0yLjMsMy45LTQuOGMtNS4xLTI0LjItMTcuOC00Ni41LTM2LjUtNjMuN2MtMjEuMi0xOS40LTQ4LjItMzAuMS03Ni0zMC4xYy0yNi41LDAtNTIuNiw5LjctNzMuNywyNy4zbC0zLjEsMi41IGMtMS42LDEuMy0zLjksMS4yLTUuNC0wLjNsLTE4LjUtMTguNWMtMS42LTEuNi0xLjUtNC4zLDAuMi01LjlsMy41LTMuMWMyNy0yMy4yLDYxLjQtMzUuOSw5Ni44LTM1LjljMzgsMCw3My45LDEzLjcsMTAxLjIsMzguNyBjMjMuMiwyMS4xLDQwLjMsNTUuMiw0NS43LDkwLjFjMC4zLDEuOSwxLjksMy40LDMuOSwzLjRoNDEuM0M0NTEuNCwyMzkuMiw0NTMuMywyNDMsNDUxLjQsMjQ1LjZ6Jy8lM0UlM0MvZyUzRSUzQy9zdmclM0VcIjtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLmljb25SZXRha2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgdmVyc2lvbj0nMS4xJyBpZD0nTGF5ZXJfMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgeD0nMHB4JyB5PScwcHgnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyBlbmFibGUtYmFja2dyb3VuZD0nbmV3IDAgMCA1MTIgNTEyJyB4bWw6c3BhY2U9J3ByZXNlcnZlJyUzRSUzQ2NpcmNsZSBmaWxsPSclMjM3MjdBODcnIGN4PScyNTYnIGN5PScyNTYnIHI9JzI1NicvJTNFJTNDZyBpZD0nSWNvbl81XyclM0UlM0NnJTNFJTNDcGF0aCBmaWxsPSclMjNGRkZGRkYnIGQ9J00zOTQuMiwxNDJMMzcwLDExNy44Yy0xLjYtMS42LTQuMS0xLjYtNS43LDBMMjU4LjgsMjIzLjRjLTEuNiwxLjYtNC4xLDEuNi01LjcsMEwxNDcuNiwxMTcuOCBjLTEuNi0xLjYtNC4xLTEuNi01LjcsMEwxMTcuOCwxNDJjLTEuNiwxLjYtMS42LDQuMSwwLDUuN2wxMDUuNSwxMDUuNWMxLjYsMS42LDEuNiw0LjEsMCw1LjdMMTE3LjgsMzY0LjRjLTEuNiwxLjYtMS42LDQuMSwwLDUuNyBsMjQuMSwyNC4xYzEuNiwxLjYsNC4xLDEuNiw1LjcsMGwxMDUuNS0xMDUuNWMxLjYtMS42LDQuMS0xLjYsNS43LDBsMTA1LjUsMTA1LjVjMS42LDEuNiw0LjEsMS42LDUuNywwbDI0LjEtMjQuMSBjMS42LTEuNiwxLjYtNC4xLDAtNS43TDI4OC42LDI1OC44Yy0xLjYtMS42LTEuNi00LjEsMC01LjdsMTA1LjUtMTA1LjVDMzk1LjcsMTQ2LjEsMzk1LjcsMTQzLjUsMzk0LjIsMTQyeicvJTNFJTNDL2clM0UlM0MvZyUzRSUzQy9zdmclM0VcIjtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLmljb25GbGFzaE9mZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB2ZXJzaW9uPScxLjEnIGlkPSdMYXllcl8xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB4PScwcHgnIHk9JzBweCcgdmlld0JveD0nMCAwIDUxMiA1MTInIHN0eWxlPSdlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7JyB4bWw6c3BhY2U9J3ByZXNlcnZlJyUzRSUzQ3N0eWxlIHR5cGU9J3RleHQvY3NzJyUzRSAuc3QwJTdCZmlsbDolMjNGRkZGRkY7JTdEJTBBJTNDL3N0eWxlJTNFJTNDZyUzRSUzQ3BhdGggY2xhc3M9J3N0MCcgZD0nTTQ5OCw0ODMuN0w0Mi4zLDI4TDE0LDU2LjRsMTQ5LjgsMTQ5LjhMOTEsMjkzLjhjLTIuNSwzLTAuMSw3LjIsMy45LDcuMmgxNDMuOWMxLjYsMCwyLjcsMS4zLDIuNCwyLjcgTDE5Ny42LDUwN2MtMSw0LjQsNS44LDYuOSw4LjksMy4ybDExOC42LTE0Mi44TDQ2OS42LDUxMkw0OTgsNDgzLjd6Jy8lM0UlM0NwYXRoIGNsYXNzPSdzdDAnIGQ9J000NDksMjE4LjJjMi41LTMsMC4xLTcuMi0zLjktNy4ySDMwMS4yYy0xLjYsMC0yLjctMS4zLTIuNC0yLjdMMzQyLjQsNWMxLTQuNC01LjgtNi45LTguOS0zLjJMMjE0LjksMTQ0LjYgbDE2MS4zLDE2MS4zTDQ0OSwyMTguMnonLyUzRSUzQy9nJTNFJTNDL3N2ZyUzRVwiO1xuICAgIH07XG4gICAgY2xhc3NfMS5wcm90b3R5cGUuaWNvbkZsYXNoT24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgdmVyc2lvbj0nMS4xJyBpZD0nTGF5ZXJfMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgeD0nMHB4JyB5PScwcHgnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyBzdHlsZT0nZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOycgeG1sOnNwYWNlPSdwcmVzZXJ2ZSclM0UlM0NzdHlsZSB0eXBlPSd0ZXh0L2NzcyclM0UgLnN0MCU3QmZpbGw6JTIzRkZGRkZGOyU3RCUwQSUzQy9zdHlsZSUzRSUzQ3BhdGggY2xhc3M9J3N0MCcgZD0nTTI4Ny4yLDIxMWMtMS42LDAtMi43LTEuMy0yLjQtMi43TDMyOC40LDVjMS00LjQtNS44LTYuOS04LjktMy4yTDc3LDI5My44Yy0yLjUsMy0wLjEsNy4yLDMuOSw3LjJoMTQzLjkgYzEuNiwwLDIuNywxLjMsMi40LDIuN0wxODMuNiw1MDdjLTEsNC40LDUuOCw2LjksOC45LDMuMmwyNDIuNS0yOTJjMi41LTMsMC4xLTcuMi0zLjktNy4yTDI4Ny4yLDIxMUwyODcuMiwyMTF6Jy8lM0UlM0Mvc3ZnJTNFXCI7XG4gICAgfTtcbiAgICBjbGFzc18xLnByb3RvdHlwZS5pY29uRmxhc2hBdXRvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHZlcnNpb249JzEuMScgaWQ9J0xheWVyXzEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHg9JzBweCcgeT0nMHB4JyB2aWV3Qm94PScwIDAgNTEyIDUxMicgc3R5bGU9J2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsnIHhtbDpzcGFjZT0ncHJlc2VydmUnJTNFJTNDc3R5bGUgdHlwZT0ndGV4dC9jc3MnJTNFIC5zdDAlN0JmaWxsOiUyM0ZGRkZGRjslN0QlMEElM0Mvc3R5bGUlM0UlM0NwYXRoIGNsYXNzPSdzdDAnIGQ9J00yODcuMiwyMTFjLTEuNiwwLTIuNy0xLjMtMi40LTIuN0wzMjguNCw1YzEtNC40LTUuOC02LjktOC45LTMuMkw3NywyOTMuOGMtMi41LDMtMC4xLDcuMiwzLjksNy4yaDE0My45IGMxLjYsMCwyLjcsMS4zLDIuNCwyLjdMMTgzLjYsNTA3Yy0xLDQuNCw1LjgsNi45LDguOSwzLjJsMjQyLjUtMjkyYzIuNS0zLDAuMS03LjItMy45LTcuMkwyODcuMiwyMTFMMjg3LjIsMjExeicvJTNFJTNDZyUzRSUzQ3BhdGggY2xhc3M9J3N0MCcgZD0nTTMyMS4zLDE4Nmw3NC0xODZINDM4bDc0LDE4NmgtNDMuNWwtMTEuOS0zMi41aC04MC45bC0xMiwzMi41SDMyMS4zeiBNNDE1LjgsNDcuOWwtMjcuMiw3MC43aDU0LjlsLTI3LjItNzAuNyBINDE1Ljh6Jy8lM0UlM0MvZyUzRSUzQy9zdmclM0VcIjtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gY29uc3QgYWNjZXB0U3R5bGVzID0geyB0cmFuc2Zvcm06IGByb3RhdGUoJHstdGhpcy5yb3RhdGlvbn1kZWcpYCB9O1xuICAgICAgICB2YXIgYWNjZXB0U3R5bGVzID0ge307XG4gICAgICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBcImNhbWVyYS13cmFwcGVyXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImNhbWVyYS1oZWFkZXJcIiB9LCBoKFwic2VjdGlvblwiLCB7IGNsYXNzOiBcIml0ZW1zXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcIml0ZW0gY2xvc2VcIiwgb25DbGljazogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUNsb3NlKGUpOyB9IH0sIGgoXCJpbWdcIiwgeyBzcmM6IHRoaXMuaWNvbkV4aXQoKSB9KSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJpdGVtIGZsYXNoXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5oYW5kbGVGbGFzaENsaWNrKGUpOyB9IH0sIHRoaXMuZmxhc2hNb2Rlcy5sZW5ndGggPiAwICYmIChoKFwiZGl2XCIsIG51bGwsIHRoaXMuZmxhc2hNb2RlID09ICdvZmYnID8gaChcImltZ1wiLCB7IHNyYzogdGhpcy5pY29uRmxhc2hPZmYoKSB9KSA6ICcnLCB0aGlzLmZsYXNoTW9kZSA9PSAnYXV0bycgPyBoKFwiaW1nXCIsIHsgc3JjOiB0aGlzLmljb25GbGFzaEF1dG8oKSB9KSA6ICcnLCB0aGlzLmZsYXNoTW9kZSA9PSAnZmxhc2gnID8gaChcImltZ1wiLCB7IHNyYzogdGhpcy5pY29uRmxhc2hPbigpIH0pIDogJycpKSkpKSwgKHRoaXMuaGFzQ2FtZXJhID09PSBmYWxzZSB8fCAhIXRoaXMuZGV2aWNlRXJyb3IpICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwibm8tZGV2aWNlXCIgfSwgaChcImgyXCIsIG51bGwsIHRoaXMubm9EZXZpY2VzVGV4dCksIGgoXCJsYWJlbFwiLCB7IGh0bWxGb3I6IFwiX3B3YS1lbGVtZW50cy1jYW1lcmEtaW5wdXRcIiB9LCB0aGlzLm5vRGV2aWNlc0J1dHRvblRleHQpLCBoKFwiaW5wdXRcIiwgeyB0eXBlOiBcImZpbGVcIiwgaWQ6IFwiX3B3YS1lbGVtZW50cy1jYW1lcmEtaW5wdXRcIiwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlRmlsZUlucHV0Q2hhbmdlLCBhY2NlcHQ6IFwiaW1hZ2UvKlwiLCBjbGFzczogXCJzZWxlY3QtZmlsZS1idXR0b25cIiB9KSkpLCB0aGlzLnBob3RvU3JjID8gKGgoXCJkaXZcIiwgeyBjbGFzczogXCJhY2NlcHRcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiYWNjZXB0LWltYWdlXCIsIHN0eWxlOiBPYmplY3QuYXNzaWduKHsgYmFja2dyb3VuZEltYWdlOiBcInVybChcIiArIHRoaXMucGhvdG9TcmMgKyBcIilcIiB9LCBhY2NlcHRTdHlsZXMpIH0pKSkgOiAoaChcImRpdlwiLCB7IGNsYXNzOiBcImNhbWVyYS12aWRlb1wiIH0sIHRoaXMuc2hvd1NodXR0ZXJPdmVybGF5ICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2h1dHRlci1vdmVybGF5XCIgfSkpLCB0aGlzLmhhc0ltYWdlQ2FwdHVyZSgpID8gKGgoXCJ2aWRlb1wiLCB7IHJlZjogZnVuY3Rpb24gKGVsKSB7IHJldHVybiBfdGhpcy52aWRlb0VsZW1lbnQgPSBlbDsgfSwgb25Mb2FkZWRNZXRhRGF0YTogdGhpcy5oYW5kbGVWaWRlb01ldGFkYXRhLCBhdXRvcGxheTogdHJ1ZSwgcGxheXNpbmxpbmU6IHRydWUgfSkpIDogKGgoXCJjYW52YXNcIiwgeyByZWY6IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gX3RoaXMuY2FudmFzRWxlbWVudCA9IGVsOyB9LCB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIgfSkpLCBoKFwiY2FudmFzXCIsIHsgY2xhc3M6IFwib2Zmc2NyZWVuLWltYWdlLXJlbmRlclwiLCByZWY6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5vZmZzY3JlZW5DYW52YXMgPSBlOyB9LCB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIgfSkpKSwgdGhpcy5oYXNDYW1lcmEgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJjYW1lcmEtZm9vdGVyXCIgfSwgIXRoaXMucGhvdG8gPyAoW1xuICAgICAgICAgICAgaChcImRpdlwiLCB7IGNsYXNzOiBcInBpY2staW1hZ2VcIiwgb25DbGljazogdGhpcy5oYW5kbGVQaWNrRmlsZSB9LCBoKFwibGFiZWxcIiwgeyBodG1sRm9yOiBcIl9wd2EtZWxlbWVudHMtZmlsZS1waWNrXCIgfSwgdGhpcy5pY29uUGhvdG9zKCkpLCBoKFwiaW5wdXRcIiwgeyB0eXBlOiBcImZpbGVcIiwgaWQ6IFwiX3B3YS1lbGVtZW50cy1maWxlLXBpY2tcIiwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlRmlsZUlucHV0Q2hhbmdlLCBhY2NlcHQ6IFwiaW1hZ2UvKlwiLCBjbGFzczogXCJwaWNrLWltYWdlLWJ1dHRvblwiIH0pKSxcbiAgICAgICAgICAgIGgoXCJkaXZcIiwgeyBjbGFzczogXCJzaHV0dGVyXCIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU2h1dHRlckNsaWNrIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJzaHV0dGVyLWJ1dHRvblwiIH0pKSxcbiAgICAgICAgICAgIGgoXCJkaXZcIiwgeyBjbGFzczogXCJyb3RhdGVcIiwgb25DbGljazogdGhpcy5oYW5kbGVSb3RhdGVDbGljayB9LCBoKFwiaW1nXCIsIHsgc3JjOiB0aGlzLmljb25SZXZlcnNlQ2FtZXJhKCkgfSkpLFxuICAgICAgICBdKSA6IChoKFwic2VjdGlvblwiLCB7IGNsYXNzOiBcIml0ZW1zXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcIml0ZW0gYWNjZXB0LWNhbmNlbFwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuaGFuZGxlQ2FuY2VsUGhvdG8oZSk7IH0gfSwgaChcImltZ1wiLCB7IHNyYzogdGhpcy5pY29uUmV0YWtlKCkgfSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaXRlbSBhY2NlcHQtdXNlXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5oYW5kbGVBY2NlcHRQaG90byhlKTsgfSB9LCBoKFwiaW1nXCIsIHsgc3JjOiB0aGlzLmljb25Db25maXJtKCkgfSkpKSkpKSkpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsYXNzXzEsIFwiYXNzZXRzRGlyc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gW1wiaWNvbnNcIl07IH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbGFzc18xLnByb3RvdHlwZSwgXCJlbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsYXNzXzEsIFwic3R5bGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiOmhvc3R7LS1oZWFkZXItaGVpZ2h0OjRlbTstLWZvb3Rlci1oZWlnaHQ6OWVtOy0taGVhZGVyLWhlaWdodC1sYW5kc2NhcGU6M2VtOy0tZm9vdGVyLWhlaWdodC1sYW5kc2NhcGU6NmVtOy0tc2h1dHRlci1zaXplOjZlbTstLWljb24tc2l6ZS1oZWFkZXI6MS41ZW07LS1pY29uLXNpemUtZm9vdGVyOjIuNWVtOy0tbWFyZ2luLXNpemUtaGVhZGVyOjEuNWVtOy0tbWFyZ2luLXNpemUtZm9vdGVyOjIuMGVtO2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sQmxpbmtNYWNTeXN0ZW1Gb250LOKAnFNlZ29lIFVJ4oCdLOKAnFJvYm90b+KAnSzigJxEcm9pZCBTYW5z4oCdLOKAnEhlbHZldGljYSBOZXVl4oCdLHNhbnMtc2VyaWY7ZGlzcGxheTpibG9ja30uaXRlbXMsOmhvc3R7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uaXRlbXN7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uaXRlbXMgLml0ZW17LW1zLWZsZXg6MTtmbGV4OjE7dGV4dC1hbGlnbjpjZW50ZXJ9Lml0ZW1zIC5pdGVtOmZpcnN0LWNoaWxke3RleHQtYWxpZ246bGVmdH0uaXRlbXMgLml0ZW06bGFzdC1jaGlsZHt0ZXh0LWFsaWduOnJpZ2h0fS5jYW1lcmEtd3JhcHBlcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5jYW1lcmEtaGVhZGVye2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMDAwO2hlaWdodDp2YXIoLS1oZWFkZXItaGVpZ2h0KX0uY2FtZXJhLWhlYWRlciAuaXRlbXN7cGFkZGluZzp2YXIoLS1tYXJnaW4tc2l6ZS1oZWFkZXIpfS5jYW1lcmEtZm9vdGVye3Bvc2l0aW9uOnJlbGF0aXZlO2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMDAwO2hlaWdodDp2YXIoLS1mb290ZXItaGVpZ2h0KX0uY2FtZXJhLWZvb3RlciAuaXRlbXN7cGFkZGluZzp2YXIoLS1tYXJnaW4tc2l6ZS1mb290ZXIpfVxcQG1lZGlhIChtYXgtaGVpZ2h0OjM3NXB4KXsuY2FtZXJhLWhlYWRlcnstLWhlYWRlci1oZWlnaHQ6dmFyKC0taGVhZGVyLWhlaWdodC1sYW5kc2NhcGUpfS5jYW1lcmEtZm9vdGVyey0tZm9vdGVyLWhlaWdodDp2YXIoLS1mb290ZXItaGVpZ2h0LWxhbmRzY2FwZSl9LmNhbWVyYS1mb290ZXIgLnNodXR0ZXJ7LS1zaHV0dGVyLXNpemU6NGVtfX0uY2FtZXJhLXZpZGVve3Bvc2l0aW9uOnJlbGF0aXZlOy1tcy1mbGV4OjE7ZmxleDoxO292ZXJmbG93OmhpZGRlbn0uY2FtZXJhLXZpZGVvLHZpZGVve2JhY2tncm91bmQtY29sb3I6IzAwMH12aWRlb3t3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21heC1oZWlnaHQ6MTAwJTttaW4taGVpZ2h0OjEwMCU7LW8tb2JqZWN0LWZpdDpjb3ZlcjtvYmplY3QtZml0OmNvdmVyfS5waWNrLWltYWdle2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7cG9zaXRpb246YWJzb2x1dGU7bGVmdDp2YXIoLS1tYXJnaW4tc2l6ZS1mb290ZXIpO3RvcDowO2hlaWdodDoxMDAlO3dpZHRoOnZhcigtLWljb24tc2l6ZS1mb290ZXIpO2NvbG9yOiNmZmZ9LnBpY2staW1hZ2UgaW5wdXR7dmlzaWJpbGl0eTpoaWRkZW59LnBpY2staW1hZ2Ugc3Zne2N1cnNvcjpwb2ludGVyO2ZpbGw6I2ZmZjt3aWR0aDp2YXIoLS1pY29uLXNpemUtZm9vdGVyKTtoZWlnaHQ6dmFyKC0taWNvbi1zaXplLWZvb3Rlcil9LnNodXR0ZXJ7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo1MCU7dG9wOjUwJTt3aWR0aDp2YXIoLS1zaHV0dGVyLXNpemUpO2hlaWdodDp2YXIoLS1zaHV0dGVyLXNpemUpO21hcmdpbi10b3A6Y2FsYyh2YXIoLS1zaHV0dGVyLXNpemUpIC8gLTIpO21hcmdpbi1sZWZ0OmNhbGModmFyKC0tc2h1dHRlci1zaXplKSAvIC0yKTtib3JkZXItcmFkaXVzOjEwMCU7YmFja2dyb3VuZC1jb2xvcjojYzZjZGQ4O3BhZGRpbmc6MTJweDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3h9LnNodXR0ZXI6YWN0aXZlIC5zaHV0dGVyLWJ1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiM5ZGE5YmJ9LnNodXR0ZXItYnV0dG9ue2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItcmFkaXVzOjEwMCU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0ucm90YXRle2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6dmFyKC0tbWFyZ2luLXNpemUtZm9vdGVyKTt0b3A6MDtoZWlnaHQ6MTAwJTtjb2xvcjojZmZmfS5yb3RhdGUsLnJvdGF0ZSBpbWd7d2lkdGg6dmFyKC0taWNvbi1zaXplLWZvb3Rlcil9LnJvdGF0ZSBpbWd7aGVpZ2h0OnZhcigtLWljb24tc2l6ZS1mb290ZXIpfS5zaHV0dGVyLW92ZXJsYXl7ei1pbmRleDo1O3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZC1jb2xvcjojMDAwfS5lcnJvcnt3aWR0aDoxMDAlO2hlaWdodDoxMDAlOy1tcy1mbGV4LXBhY2s6Y2VudGVyOy1tcy1mbGV4LWFsaWduOmNlbnRlcn0uZXJyb3IsLm5vLWRldmljZXtjb2xvcjojZmZmO2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyfS5uby1kZXZpY2V7YmFja2dyb3VuZC1jb2xvcjojMDAwOy1tcy1mbGV4OjE7ZmxleDoxOy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1uOy1tcy1mbGV4LWFsaWduOmNlbnRlcjstbXMtZmxleC1wYWNrOmNlbnRlcn0ubm8tZGV2aWNlIGxhYmVse2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjZweDtwYWRkaW5nOjZweCA4cHg7Y29sb3I6IzAwMH0ubm8tZGV2aWNlIGlucHV0e3Zpc2liaWxpdHk6aGlkZGVuO2hlaWdodDowO21hcmdpbi10b3A6MTZweH0uYWNjZXB0e2JhY2tncm91bmQtY29sb3I6IzAwMDstbXMtZmxleDoxO2ZsZXg6MTtvdmVyZmxvdzpoaWRkZW59LmFjY2VwdCAuYWNjZXB0LWltYWdle3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bWF4LWhlaWdodDoxMDAlO2JhY2tncm91bmQtcG9zaXRpb246NTAlO2JhY2tncm91bmQtc2l6ZTpjb3ZlcjtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXR9LmNsb3NlIGltZ3tjdXJzb3I6cG9pbnRlcn0uY2xvc2UgaW1nLC5mbGFzaCBpbWd7d2lkdGg6dmFyKC0taWNvbi1zaXplLWhlYWRlcik7aGVpZ2h0OnZhcigtLWljb24tc2l6ZS1oZWFkZXIpfS5hY2NlcHQtY2FuY2VsIGltZywuYWNjZXB0LXVzZSBpbWd7d2lkdGg6dmFyKC0taWNvbi1zaXplLWZvb3Rlcik7aGVpZ2h0OnZhcigtLWljb24tc2l6ZS1mb290ZXIpfS5vZmZzY3JlZW4taW1hZ2UtcmVuZGVye3RvcDowO2xlZnQ6MDt2aXNpYmlsaXR5OmhpZGRlbjtwb2ludGVyLWV2ZW50czpub25lO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCV9XCI7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBjbGFzc18xO1xufSgpKTtcbmV4cG9ydCB7IENhbWVyYVBXQSBhcyBwd2FfY2FtZXJhIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///53099\n")}}]);